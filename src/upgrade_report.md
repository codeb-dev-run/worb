# WORKB SaaS 통합 업그레이드 리포트

## 1. 개요
본 문서는 현재 구축된 프로젝트 관리 시스템(CodeB Platform)과 신규 기획된 **WORKB 그룹웨어 SaaS 통합 기획서 v1.0** 간의 차이점을 분석하고, 성공적인 시스템 확장을 위한 마이그레이션 및 업그레이드 계획을 기술합니다.

## 2. 현황 분석 (Gap Analysis)

현재 시스템은 **기본적인 프로젝트 관리(칸반, 간트)** 기능에 집중되어 있으며, PRD에서 요구하는 **HR(근태), 재무(손익), 그룹웨어(전자결재)** 기능은 부재하거나 초기 단계입니다.

### 2.1 아키텍처 및 권한
| 구분 | 현재 상태 (AS-IS) | 목표 상태 (TO-BE) | 업그레이드 필요 사항 |
|---|---|---|---|
| **상위 구조** | 단일 조직 가정, 프로젝트 나열식 | **워크스페이스(Workspace)** 기반 멀티 테넌트 구조 | `Workspace` 모델 추가 및 모든 데이터의 격리 처리 |
| **권한 모델** | Admin / Member 단순 2단계 | **Workspace Role** + **Project Role** 이원화 | 권한 미들웨어 고도화, 역할별 상세 권한 제어 구현 |

### 2.2 프로젝트 관리 모듈
| 구분 | 현재 상태 (AS-IS) | 목표 상태 (TO-BE) | 업그레이드 필요 사항 |
|---|---|---|---|
| **Task 관리** | 칸반, 간트, 리스트 뷰 지원 | **마인드맵** 연동, 실시간 동기화 | 마인드맵 에디터 개발, `MindmapNode` ↔ `Task` 변환 로직 구현 |
| **실시간성** | React Query 기반 폴링/캐싱 | **WebSocket** 기반 실시간 인터랙션 | Socket.io 또는 Pusher 연동, 칸반 이동 실시간 반영 |
| **파일 관리** | 단순 목록 형태 | 프로젝트/폴더 구조화 | 파일 버전 관리 및 폴더링 UI 개선 |

### 2.3 HR 및 근태 모듈 (신규)
| 구분 | 현재 상태 (AS-IS) | 목표 상태 (TO-BE) | 업그레이드 필요 사항 |
|---|---|---|---|
| **근태 기록** | **없음** | 출퇴근(Check-in/out), 근무시간 계산 | `AttendanceRecord` 모델링, 위치 기반/IP 체크 로직 |
| **근무 정책** | **없음** | 유연근무, 코어타임, 재택근무 | `AttendancePolicy` 설정 기능, 위반 시 패널티 로직 |
| **재택 관리** | **없음** | **Presence Check(근무확인 팝업)** | 랜덤 팝업 및 응답 로직, 활동 로그 추적 |

### 2.4 재무 및 손익 모듈 (신규)
| 구분 | 현재 상태 (AS-IS) | 목표 상태 (TO-BE) | 업그레이드 필요 사항 |
|---|---|---|---|
| **계약 관리** | `budget` 단순 필드 | 계약(Contract), 단계별 청구(PaymentStage) | 계약 및 인보이스 발행/관리 프로세스 구현 |
| **손익 관리** | **없음** | 실시간 **P&L(손익계산서)** 대시보드 | 비용(Expense) 입력 및 승인, 매출 대비 손익 자동 계산 |

### 2.5 그룹웨어 및 전자결재 (신규)
| 구분 | 현재 상태 (AS-IS) | 목표 상태 (TO-BE) | 업그레이드 필요 사항 |
|---|---|---|---|
| **커뮤니케이션** | Task 댓글 | 공지사항, 부서별 게시판 | `Board`, `Post` 모델 추가 |
| **전자결재** | **없음** | 휴가/지출/계약 승인 워크플로우 | `ApprovalRequest`, `ApprovalLine` 결재선 로직 구현 |

---

## 3. 데이터베이스 마이그레이션 계획 (Schema Changes)

### 3.1 신규 모델 (New Models)

#### Core
*   **Workspace**: 조직 단위, 과금 및 정책의 기준
*   **WorkspaceMember**: 워크스페이스 내 역할(Owner, Admin, Member) 정의

#### HR (Attendance)
*   **AttendancePolicy**: 근무 유형(고정/유연), 코어타임 설정
*   **AttendanceRecord**: 일별 출퇴근 기록, 근무 상태(지각/조퇴 등)
*   **LeaveRequest**: 휴가 신청 및 잔여 연차 관리

#### Finance
*   **ProjectContract**: 계약 정보, 총 금액, 기간
*   **PaymentStage**: 계약금/중도금/잔금 단계 정의
*   **Invoice**: 세금계산서 발행 기록
*   **ProjectExpense**: 프로젝트 관련 지출 내역

#### Groupware
*   **ApprovalRequest**: 전자결재 요청 본문
*   **ApprovalStep**: 결재선 및 승인/반려 상태

### 3.2 기존 모델 변경 (Modifications)
*   **User**: 글로벌 계정 정보만 유지, 워크스페이스 종속 정보 분리
*   **Project**: `workspaceId` FK 추가, `budget` 필드를 Finance 모듈로 이관
*   **Task**: 마인드맵 노드 ID 매핑 필드 추가

---

## 4. 단계별 이행 전략 (Implementation Roadmap)

### Phase 1: Core 구조 개편 및 프로젝트 고도화 (MVP 타겟)
1.  **Workspace 도입**: 기존 데이터를 Default Workspace로 마이그레이션
2.  **마인드맵 개발**: 프로젝트 기획 단계 강화 (마인드맵 → Task 변환)
3.  **실시간성 확보**: 칸반 보드 WebSocket 연동

### Phase 2: HR 및 전자결재 기초
1.  **근태 시스템**: 출퇴근 버튼 및 기본 근무 정책 적용
2.  **전자결재(Lite)**: 휴가 신청 및 승인 프로세스 구현
3.  **게시판**: 공지사항 및 팀 게시판 오픈

### Phase 3: 재무 통합 및 고도화
1.  **계약/매출 관리**: 계약 등록 및 Payment Stage 설정
2.  **비용/손익**: 지출 결의 연동 및 프로젝트별 손익 카드 제공
3.  **Presence Check**: 재택근무자 대상 근무 확인 시스템 도입

## 5. 결론
현재 시스템은 프로젝트 관리의 기본기를 갖추고 있으나, **"회사 운영 전반(HR, 재무)"을 포괄하는 ERP/그룹웨어로 진화**하기 위해서는 대대적인 스키마 확장과 모듈 추가가 필요합니다.
특히 **워크스페이스 기반의 멀티 테넌트 구조 전환**이 선행되어야 하며, 이후 **HR → 재무 → 전자결재** 순으로 기능을 확장하는 것이 안정적입니다.
